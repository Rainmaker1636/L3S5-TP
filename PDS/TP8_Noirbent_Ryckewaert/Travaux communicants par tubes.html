<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.23">
<link rel="stylesheet" type="text/css" href="Travaux%20communicants%20par%20tubes_fichiers/feuille.css"><link rel="stylesheet" type="text/css" href="Travaux%20communicants%20par%20tubes_fichiers/tdjobs-.css">
<title>Travaux communicants par tubes</title>
</head>
<body>
<a href="http://www.fil.univ-lille1.fr/%7Ehym/e/pds/tp/tdjobs-impl.html"><img src="Travaux%20communicants%20par%20tubes_fichiers/previous.png" alt="Précédent"></a>
<a href="http://www.fil.univ-lille1.fr/%7Ehym/e/pds/tp/tdjobs.html"><img src="Travaux%20communicants%20par%20tubes_fichiers/contents.png" alt="Table des matières"></a>
<hr>
<h2 id="sec10" class="section">3&nbsp;&nbsp;Travaux communicants par tubes</h2>
<p>Il s’agit d’ajouter la possibilité de traiter dans notre gestionnaire
d’enchaînements de travaux dont les entrées/sorties standard sont
redirigées vers/depuis des tubes anonymes.</p><p>On pourra ainsi traiter des commandes telles
</p><blockquote class="quote">
<pre class="verbatim">% ls -1 | wc -l
34
</pre></blockquote><div class="theorem"><span style="font-weight:bold"><br>
Exercice&nbsp;10</span>&nbsp;<span style="font-weight:bold">(Connexion de deux commandes par un tube anonyme)</span>&nbsp;&nbsp;<em>
Il s’agit d’implanter une commande
</em><blockquote class="quote"><em>
</em><pre class="verbatim"><em>pipe command1 to command2
</em></pre></blockquote><em>
qui exécute les commandes </em><em><span style="font-family:monospace">command1</span></em><em> et </em><em><span style="font-family:monospace">command2</span></em><em>
en redirigeant la sortie standard de la première commande vers un
tube anonyme depuis lequel sera redirigée l’entrée standard de la
seconde commande.

</em></div><div class="theorem"><span style="font-weight:bold"><br>
Exercice&nbsp;11</span>&nbsp;<span style="font-weight:bold">(Des tubes dans le gestionnaire de travaux)</span>&nbsp;&nbsp;<em>
</em><div class="theorem"><em><span style="font-weight:bold">Question&nbsp;1</span></em><em>&nbsp;</em><em><span style="font-weight:bold">(Un tube, deux commandes)</span></em><em>&nbsp;&nbsp;</em>
Modifiez le gestionnaire de travaux pour prendre en compte la
possibilité de lancer des commandes selon les deux syntaxes
suivantes
<blockquote class="quote">
<pre class="verbatim">% commande1 | commande2
</pre></blockquote>
et
<blockquote class="quote">
<pre class="verbatim">% commande1 | commande2 &amp;
</pre></blockquote>
une telle commande ne crée qu’un unique travail, composé de
deux processus.<p>Attention&nbsp;: contrairement au cas de base, le canevas de code
ne gère pas l’ajout du nouveau travail aux structures de
données jobs.


</p></div><div class="theorem"><em><span style="font-weight:bold">Question&nbsp;2</span></em><em>&nbsp;</em><em><span style="font-weight:bold">(Des tubes et des commandes)</span></em><em>&nbsp;&nbsp;</em>
Étendez votre implantation précédente pour autoriser
l’enchaînement de multiples commandes.<p>Pour un ligne de commande
</p><blockquote class="quote">
<pre class="verbatim">% commande1 | commande2 | ... | commanden
</pre></blockquote><p>
il s’agit d’itérer <span style="font-family:monospace">n-1</span> fois le traitement suivant :
</p><ul class="itemize"><li class="li-itemize">
créer un tube qui va relier la commande <span style="font-family:monospace">i</span> à
la commande <span style="font-family:monospace">i+1</span>
</li><li class="li-itemize">créer un fils qui
<ul class="itemize"><li class="li-itemize">
duplique son descripteur d’accès en écriture sur
le tube vers sa sortie standard,
</li><li class="li-itemize">duplique son descripteur d’accès en lecture sur le
tube créé à l’itération précédente vers son entrée
standard,
</li><li class="li-itemize">ferme tous les morceaux de tubes inutilisés,
</li><li class="li-itemize">exécute la commande <span style="font-family:monospace">commandi</span> et termine ;
</li></ul>
</li><li class="li-itemize">le père ferme les morceaux de tube inutiles (partie en
écriture sur le tube qui vient d’être créé, partie en
lecture sur le tube de l’itération précédente) et poursuit
la boucle,
</li></ul><p>
puis de créer un dernier fils pour exécuter la commande
<span style="font-family:monospace">commandn</span>.

</p></div></div><hr>
<a href="http://www.fil.univ-lille1.fr/%7Ehym/e/pds/tp/tdjobs-impl.html"><img src="Travaux%20communicants%20par%20tubes_fichiers/previous.png" alt="Précédent"></a>
<a href="http://www.fil.univ-lille1.fr/%7Ehym/e/pds/tp/tdjobs.html"><img src="Travaux%20communicants%20par%20tubes_fichiers/contents.png" alt="Table des matières"></a>


</body></html>